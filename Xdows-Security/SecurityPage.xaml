<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="Xdows_Security.SecurityPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Xdows_Security"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid Margin="64,16,64,0" VerticalAlignment="Top">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>

        <!-- 扫描路径 -->
        <TextBlock Name="PathText"
                   Text="扫描模式：未指定"
                   FontSize="16"
                   VerticalAlignment="Center"
                   HorizontalAlignment="Left"
                   Grid.Column="0"/>

        <!-- 选择按钮 -->
        <Button Content="选择文件"
        Name="ScanButton"
        Width="88"
        Height="40"
        VerticalAlignment="Center"
        HorizontalAlignment="Right"
        Grid.Column="1">
            <Button.Flyout>
                <MenuFlyout Placement="Bottom">
                    <MenuFlyoutItem Text="快速扫描" Tag="Quick" Click="OnScanMenuClick">
                        <MenuFlyoutItem.Icon>
                            <FontIcon Glyph="&#xE945;" />
                        </MenuFlyoutItem.Icon>
                    </MenuFlyoutItem>
                    <MenuFlyoutItem Text="全盘扫描" Tag="Full" Click="OnScanMenuClick">
                        <MenuFlyoutItem.Icon>
                            <FontIcon Glyph="&#xEDA2;" />
                        </MenuFlyoutItem.Icon>
                    </MenuFlyoutItem>
                    <MenuFlyoutSeparator/>
                    <MenuFlyoutItem Text="文件扫描" Tag="File" Click="OnScanMenuClick">
                        <MenuFlyoutItem.Icon>
                            <FontIcon Glyph="&#xE8A5;" />
                        </MenuFlyoutItem.Icon>
                    </MenuFlyoutItem>
                    <MenuFlyoutItem Text="目录扫描" Tag="Folder" Click="OnScanMenuClick">
                        <MenuFlyoutItem.Icon>
                            <FontIcon Glyph="&#xE8B7;" />
                        </MenuFlyoutItem.Icon>
                    </MenuFlyoutItem>
                    <MenuFlyoutSeparator/>
                    <MenuFlyoutItem Text="更多扫描" Tag="More" Click="OnScanMenuClick">
                        <MenuFlyoutItem.Icon>
                            <FontIcon Glyph="&#xE944;" />
                        </MenuFlyoutItem.Icon>
                    </MenuFlyoutItem>
                </MenuFlyout>
            </Button.Flyout>
        </Button>

        <!-- 进度条 -->
        <ProgressBar Name="ScanProgress"
                     Grid.Row="1"
                     Margin="0,16,0,0"
                     IsIndeterminate="False"
                     Visibility="Collapsed"/>

        <!-- 状态文本 -->
        <TextBlock Name="StatusText"
                   Grid.Row="2"
                   Margin="0,8,0,0"
                   FontSize="14"/>

        <ListView Name="VirusList"
          Grid.Row="3"
          Margin="0,8,0,0"
          Visibility="Collapsed"
          DoubleTapped="VirusList_DoubleTapped">
            <!-- 行模板 -->
            <ListView.ItemTemplate>
                <DataTemplate>
                    <Grid Padding="12,6">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="2*" MinWidth="300"/>
                            <ColumnDefinition Width="*"   MinWidth="150"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="{Binding FilePath}"
                           TextTrimming="CharacterEllipsis"/>
                        <TextBlock Grid.Column="1" Text="{Binding VirusName}"/>

                        <Grid.ContextFlyout>
                            <MenuFlyout>
                                <MenuFlyoutItem Text="详细信息"
                                        Click="OnDetailClick"
                                        Tag="{Binding}">
                                    <MenuFlyoutItem.Icon>
                                        <FontIcon Glyph="&#xE946;" />
                                    </MenuFlyoutItem.Icon>
                                </MenuFlyoutItem>
                                <MenuFlyoutSeparator/>
                                <MenuFlyoutItem Text="删除文件"
                                        Click="OnDeleteClick"
                                        Tag="{Binding}">
                                        <MenuFlyoutItem.Icon>
                                            <FontIcon Glyph="&#xE74D;" />
                                        </MenuFlyoutItem.Icon>
                                    </MenuFlyoutItem>
                            </MenuFlyout>
                        </Grid.ContextFlyout>
                    </Grid>
                </DataTemplate>
            </ListView.ItemTemplate>

            <!-- 虚拟化 -->
            <ListView.ItemsPanel>
                <ItemsPanelTemplate>
                    <ItemsStackPanel/>
                </ItemsPanelTemplate>
            </ListView.ItemsPanel>
        </ListView>
    </Grid>
</Page>